<?php
class MinStack {
    protected $stack = [];
    protected $tail = -1;
    protected $sorted = [];

    /**
     * initialize your data structure here.
     */
    function __construct() {

    }

    /**
     * @param Integer $x
     * @return NULL
     */
    function push($x){
        $this->stack[++$this->tail] = $x;

        $this->sorted[$this->tail] = $x;
        for($i = $this->tail; $i>0; $i--){
            if($this->sorted[$i] < $this->sorted[$i-1]){
                $temp = $this->sorted[$i-1];
                $this->sorted[$i-1] = $this->sorted[$i];
                $this->sorted[$i] = $temp;
            }
        }
        // var_dump($this->stack);
        // var_dump($this->sorted);
    }

    /**
     * @return NULL
     */
    function pop() {
        $pop = $this->stack[$this->tail--];
        unset($this->stack[$this->tail+1]);

        for($i=0, $move=false; $i<=$this->tail; $i++){
            if($this->sorted[$i] === $pop){
                $move = true;
            }
            if($move){
                $this->sorted[$i] = $this->sorted[$i+1];
            }
        }
        unset($this->sorted[$this->tail+1]);
        // var_dump($this->stack);
        // var_dump($this->sorted);
    }

    /**
     * @return Integer
     */
    function top() {
        // var_dump($this->stack);
        return $this->stack[$this->tail];
    }

    /**
     * @return Integer
     */
    function getMin() {
        // var_dump($this->sorted);
        return $this->sorted[0];
    }
}

/**
 * Your MinStack object will be instantiated and called as such:
 * $obj = MinStack();
 * $obj->push($x);
 * $obj->pop();
 * $ret_3 = $obj->top();
 * $ret_4 = $obj->getMin();
 */

