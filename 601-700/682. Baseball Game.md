<?php
class Solution {
    function calPoints($ops) {
        $points = [];
        foreach($ops as $op){
            $max = count($points);
            switch($op){
                case '+':
                    $p = 0;
                    if(isset($points[$max-1])){
                        $p += $points[$max-1];
                    }
                    if(isset($points[$max-2])){
                        $p += $points[$max-2];
                    }
                    $points[] = $p;
                    break;
                case 'D':
                    $points[] = isset($points[$max-1])?$points[$max-1]*2:0;
                    break;
                case 'C':
                    array_pop($points);
                    break;
                default:
                    $points[] = (int)$op;
                    break;
            }
        }
        return array_sum($points);
    }
}
