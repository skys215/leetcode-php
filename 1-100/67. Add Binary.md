<?php
class Solution {

    /**
     * @param String $a
     * @param String $b
     * @return String
     */
    function addBinary($a, $b) {
        $revA = str_split(strrev($a));
        $revB = str_split(strrev($b));
        $revResult = '';
        $prev = 0; //上一位的进位
        $cur = 0;  //当前位余数
        $add = 0;  //当前位是否进位
        $max = max(strlen($a), strlen($b));
        for($key = 0; $key<$max; $key++){
            if(!isset($revA[$key])){
				$revA[$key] = '0';
            }
            if(!isset($revB[$key])){
				$revB[$key] = '0';
            }
            if($revA[$key] === '0' && $revB[$key] === '0'){
                $add = '0';
                $cur = '0';
            }
            elseif($revA[$key] === '1' && $revB[$key] === '1'){
                $add = '1';
                $cur = '0';
            }
            else{
                $add = '0';
                $cur = '1';
            }
            if($prev === '1'){
                if($cur === '1'){
                    $add = '1';
                    $cur = '0';
                }
                else{
                    $cur = '1';
                    //$add = $add;
                }
            }
            $revResult .= $cur;
            $prev = $add;
        }
        if($prev === '1'){
            $revResult .= '1';
        }
        return strrev($revResult);
    }
}

