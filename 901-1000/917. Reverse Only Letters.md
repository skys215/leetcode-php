<?php
class Solution {

    /**
     * @param String $S
     * @return String
     */
    function reverseOnlyLetters($S) {
        $S = str_split($S);
        $chars = [];
        $others = [];
        foreach($S as $key=>$char){
            if(($char>='a' && $char<='z')
              || ($char>='A' && $char<='Z')
            ){
                $chars[$key] = $char;
            }
            else{
                $others[$key] = $char;
            }
        }
        $keys = array_keys($chars);
        $chars = array_reverse($chars);
        $chars = array_combine($keys,$chars);
        $S = $chars+$others;
        ksort($S);
        return implode('',$S);
    }
}
