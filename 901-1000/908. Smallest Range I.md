<?php
class Solution {
    function smallestRangeI($A, $K) {
        $mid = max($K,ceil((max($A)+min($A))/2));
        $b = [];
        foreach($A as $a){
            if($a-$mid>$K && $a>=$mid){
                $b[] = $a-$K;
            }
            else if($a-$mid<$K&&$a>=$mid){
                $b[] = $mid;
            }
            else if($mid-$a<$K && $a<$mid){
                $b[] =$mid;
            }
            else if($mid-$a>$K && $a<$mid){
                $b[] = $a+$K;
            }
        }
        return max($b)-min($b);
    }
}

