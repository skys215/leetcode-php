<?php
class Solution {

    /**
     * @param Integer[][] $grid
     * @return Integer
     */
    function surfaceArea($grid) {
        $total = 0;
        $ys = count($grid);
        for($i = 0; $i<$ys; $i++){
            $xs = count($grid[$i]);
            for($j = 0; $j<$xs; $j++){
                $total += $grid[$i][$j]*4+2*($grid[$i][$j]!=0);
                if($i+1<$ys){
                    $total -= min($grid[$i][$j],$grid[$i+1][$j])*2;
                }
                if($j+1<$ys){
                    $total -= min($grid[$i][$j],$grid[$i][$j+1])*2;
                }
            }
        }
        return $total;
    }
}
