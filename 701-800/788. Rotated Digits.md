<?php
class Solution {

    /**
     * @param Integer $N
     * @return Integer
     */
    function rotatedDigits($N) {
        $all = range(1,$N);
        $good = array_filter($all, function($val){
            $vs = str_split($val);
            $cnt = array_count_values($vs);
            if(isset($cnt[3]) || isset($cnt[4]) || isset($cnt[7])){
                return false;
            }
            $newvs = array_map(function($va){
                switch($va){
                    case 2: return 5;
                    case 5: return 2;
                    case 6: return 9;
                    case 9: return 6;
                    default:
                        return $va;
                }
            },$vs);
            return intval(implode($newvs)) != $val;
        });
        return count($good);
    }
}
